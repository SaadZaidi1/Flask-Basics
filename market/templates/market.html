{% extends "base.html" %}

{% block title %}
    Market - Shop Now
{% endblock %}

{% block content %}
<div class="market-header text-center mb-5 p-4" style="background: linear-gradient(135deg, #667eea20, #764ba220); border-radius: 15px;">
    <h1 class="display-4 fw-bold mb-3" style="background: linear-gradient(135deg, #667eea, #764ba2); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
        <i class="fas fa-shopping-bag me-3"></i>Market
    </h1>
    <p class="lead text-muted">Discover amazing products at unbeatable prices</p>
</div>

<div class="row g-4">
    {% for item in items %}
        <div class="col-lg-4 col-md-6">
            <div class="card h-100 border-0 shadow-sm market-card" style="border-radius: 15px; overflow: hidden;">
                <div class="card-header text-white text-center py-3" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                    <h5 class="card-title mb-0 fw-bold">
                        <i class="fas fa-cube me-2"></i>{{ item.name }}
                    </h5>
                </div>
                <div class="card-body p-4">
                    <div class="price-section text-center mb-3">
                        <h3 class="price-tag fw-bold mb-2" style="color: #667eea;">${{ item.price }}</h3>
                        <div class="stock-badge">
                            {% if item.stock > 0 %}
                                <span class="badge rounded-pill px-3 py-2" style="background: linear-gradient(135deg, #28a745, #20c997); font-size: 0.9rem;">
                                    <i class="fas fa-check-circle me-1"></i>{{ item.stock }} in stock
                                </span>
                            {% else %}
                                <span class="badge bg-danger rounded-pill px-3 py-2" style="font-size: 0.9rem;">
                                    <i class="fas fa-times-circle me-1"></i>Out of stock
                                </span>
                            {% endif %}
                        </div>
                    </div>
                    
                    <div class="description-section mb-4">
                        <p class="text-muted text-center">{{ item.description or "No description available" }}</p>
                    </div>
                    
                    <div class="btn-group w-100" role="group">
                        <button type="button" class="btn btn-outline-primary rounded-pill me-2" data-bs-toggle="modal" data-bs-target="#itemModal{{ item.id }}">
                            <i class="fas fa-info-circle me-1"></i>More Info
                        </button>
                        <button type="button" class="btn rounded-pill" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none;">
                            <i class="fas fa-shopping-cart me-1"></i>Purchase
                        </button>
                    </div>
                </div>
            </div>
        </div>
    {% else %}
        <div class="col-12">
            <div class="alert alert-info text-center p-4" style="border-radius: 15px; background: linear-gradient(45deg, #667eea20, #764ba220); border: 2px solid #667eea;">
                <i class="fas fa-info-circle fa-2x mb-3" style="color: #667eea;"></i>
                <h4 style="color: #667eea;">No Items Available</h4>
                <p class="mb-0 text-muted">Check back later for amazing products!</p>
            </div>
        </div>
    {% endfor %}
</div>

<!-- Enhanced Modals for item details -->
{% for item in items %}
<div class="modal fade" id="itemModal{{ item.id }}" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content" style="border-radius: 15px; border: none; overflow: hidden;">
            <div class="modal-header text-white" style="background: linear-gradient(135deg, #667eea, #764ba2); border: none;">
                <h5 class="modal-title fw-bold">
                    <i class="fas fa-cube me-2"></i>{{ item.name }}
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body p-4">
                <div class="text-center mb-4">
                    <div class="product-icon mb-3">
                        <i class="fas fa-box fa-4x" style="color: #667eea;"></i>
                    </div>
                    <h3 class="fw-bold" style="color: #764ba2;">${{ item.price }}</h3>
                </div>
                
                <div class="product-details">
                    <div class="detail-row mb-3 p-3" style="background: #f8f9fa; border-radius: 10px;">
                        <strong style="color: #667eea;">Stock:</strong>
                        <span class="badge rounded-pill ms-2" style="background: linear-gradient(135deg, #28a745, #20c997);">
                            {{ item.stock }} available
                        </span>
                    </div>
                    
                    <div class="detail-row mb-3 p-3" style="background: #f8f9fa; border-radius: 10px;">
                        <strong style="color: #764ba2;">Description:</strong>
                        <p class="mb-0 mt-2 text-muted">{{ item.description or "No description available" }}</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer border-0 p-4">
                <button type="button" class="btn btn-outline-secondary rounded-pill" data-bs-dismiss="modal">
                    <i class="fas fa-times me-1"></i>Close
                </button>
                <button type="button" class="btn rounded-pill" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none;">
                    <i class="fas fa-shopping-cart me-1"></i>Add to Cart
                </button>
            </div>
        </div>
    </div>
</div>
{% endfor %}

<style>
    .market-card {
        transition: all 0.3s ease;
    }
    
    .market-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.1) !important;
    }
    
    .price-tag {
        font-size: 2rem;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }
    
    .btn {
        transition: all 0.3s ease;
        font-weight: 600;
    }
    
    .btn:hover {
        transform: translateY(-2px);
    }
    
    .modal-content {
        box-shadow: 0 20px 60px rgba(0,0,0,0.2);
    }
    
    .product-icon {
        animation: float 3s ease-in-out infinite;
    }
    
    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
    }
</style>

    <!-- Modal for item details -->
    {% for item in items %}
    <div class="modal fade" id="itemModal{{ item.id }}" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{{ item.name }}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p><strong>Price:</strong> ${{ item.price }}</p>
                    <p><strong>Stock:</strong> {{ item.stock }} available</p>
                    <p><strong>Description:</strong> {{ item.description or "No description available" }}</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-success">Purchase</button>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
